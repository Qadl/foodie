<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/ppage.css">
    <link rel="stylesheet" href="../css/food.css">
    <link rel="stylesheet" href="../css/cart.css">
    <link rel="stylesheet" href="../css/reserve.css">
    <link rel="stylesheet" href="../css/checkout.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body style="height: 100%;">

    <nav class="navbar navbar-primary navbar-expand-md d-flex justify-content-between w-100 n-s">
        <div class="d-flex justify-content-around w-50 p-0">


            <div>
                <a href="index.html" class="nav-brand">
                    <img class="n-img" src="../images/fdlogo.png" alt="">

                </a>
            </div>

            <div>
                <button class="navbar-toggler" data-toggle="collapse" onclick="openNav()">
                    <i class="fa fa-bars" style="color: white;"></i>


                </button>


            </div>


            <div style="width: 100%;" id="myNav" class="overlay">


                <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">
                    Ã—
                </a>
                <div class="overlay-content">
                    <i class="fa fa-star ov-str"></i>
                    <a href="index.html" class="ov-cont">H O M E</a>
                    <a href="#" class="ov-cont">M E N U</a>
                    <a href="#" class="ov-cont">C O N T A C T &nbsp; U S</a>
                    <a href="#" class="ov-cont">R E S E R V A T I O N</a>
                    <a href="#" class="ov-cont">V I E W &nbsp; C A R T</a>
                </div>
            </div>




        </div>

        <div class="collapse navbar-collapse p-0 lp-sd">
            <input type="text" class="lp-sip form-control" placeholder="search">
            <button class="btn lp-sbt">SEARCH</button>
        </div>

        <div class="collapse navbar-collapse w-100 p-0 ml-5">
            <ul class="navbar-nav ">
                <li class="nav-item ml-2" style="min-width: fit-content;">
                    <a href="index.html" class="nav-link  n-li">
                        HOME
                        <div class="n-dot1"></div>
                    </a>

                </li>

                <li class="nav-item ml-2" style="min-width: fit-content;">
                    <a href="menu.html" class="nav-link n-li">
                        MENU
                        <div class="n-dot1"></div>
                        <!-- <i class="fa fa-angle-down"></i> -->
                    </a>

                </li>

                <!-- <li class="nav-item ml-2" style="min-width: fit-content;">
                        <a href="a" class="nav-link n-li">
                            OUR HISTORY
                            <div class="n-dot1"></div>
                        </a>
    
                    </li> -->

                    <li class="nav-item ml-2" style="min-width: fit-content;" id="sgn">
                        <a href="#" class="nav-link n-li" onclick="signInM()">
                            SIGN IN
                            <div class="n-dot1"></div>
                        </a>
    
                    </li>
    
    
    
                    <div hidden class="x-wso dropdown nav-item ml-2" id="prof" style="min-width: fit-content;">
                        <a href="#" class="nav-link n-li dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-user"></i> <span id="pName"></span>
                            <!-- <div class="n-dot1"></div> -->
                        </a>
                        <span>
                            <a href="#"  id="user"></a>
                        </span>
    
                        <div class=" dropdown-menu lp-dd">
    
                            <li class="nav-item">
                                <a href="#" class="nav-link ml-3 n-li">
                                    Profile
                                </a>
    
                            </li>
    
                            <li class="nav-item">
                                <a href="#" class="ml-3">
                                    <button class="btn btn-danger" style="font-weight: 600;" onclick="signOut()">
                                        SIGN OUT
                                    </button>
                                </a>
                            </li>
    
                        </div>
                    </div>
    
                <li class="nav-item ml-2" style="min-width: fit-content;">
                    <a href="reservation.html" class="nav-link n-li">
                        RESERVATIONS
                        <div class="n-dot1"></div>
                    </a>

                </li>

                <button class="nav-item n-scb ml-2" style="min-width: fit-content; position: relative;"
                    onclick="openCart()">
                    <i class="fa fa-shopping-cart n-sc" style="color: goldenrod;"></i>
                    <div class="n-dot"></div>
                    <div id="cNumb" class="n-scco"></div>
                </button>

            </ul>



        </div>

    </nav>

    <main class="container-fluid cc-top">
        <div>
            <button class="btn cc-tbt" onclick="backtoS()">
                <i class="fa fa-arrow-left"></i>
                CONTINUE SHOPPING
            </button>
        </div>

        <div class="container-fluid x-zoom x-cont">
            <div class="row" style="overflow-y: hidden;">
                <div class="card card-body col-sm-7  cc-card">

                    <table id="display">

                    </table>

                </div>

                <div class=" card card-body col-sm-3 ml-3  cc-card2">
                    <div class="cc-sh1">
                        <p>Subtotal</p>
                        <div class="cc-pri">
                            <span>&#8358;</span>
                            <span id="subt2"></span>
                        </div>
                    </div>

                    <div class="cc-sh2">
                        <div class="x-shp">
                            <p>Shipping</p>
                        </div>

                        <div id="chLoc" style="margin-left: 30%;">
                            <span id="local"></span>
                            <span>&#8358;</span>
                            <span id="shpf"></span>

                            <p id="shpto"></p>
                            <button class="btn x-ch" onclick="changeAdd()">
                                Change Address
                            </button>

                        </div>
                        <div id="selLoc">
                            <p>Select your location</p>
                            <select name="" id="list" class="mt-3">
                                <option value="STATE">STATE</option>
                                <option value="LAGOS">LAGOS</option>
                            </select>

                            <select name="state" id="list" class="mt-3 x-sle">
                                <option value="LOCATION">LOCATION</option>
                                <option value="LEKKI">LEKKI</option>
                                <option value="AJAH">AJAH</option>
                                <option value="VI">VI</option>
                                <option value="IKEJA">IKEJA</option>

                            </select>

                            <button class="mt-3" onclick="update()">UPDATE</button>
                        </div>
                    </div>

                    <div class="cc-sh3 mt-4">
                        <p>Total</p>
                        <div>
                            <span>&#8358;</span>
                            <span id="subt3"></span>

                        </div>
                    </div>


                    <div class="c-cdbt">
                        <button class="btn c-cobt" onclick="OpenCheckout()">
                            CHECKOUT
                        </button>
                    </div>


                </div>
            </div>
        </div>



    </main>


    <div id="p" class="modal fade ch-mdf">
        <div class="modal-dialog ch-mdd" style="position: relative;">
            <div class="modal-content" style="background-color: rgba(0, 0, 0, 0.6);" id="modalz">

                <div class="modal-header d-flex justify-content-between">
                    <img class="rd-img" src="../images/fdlogo.png" alt="">
                    <h5 class="modal-title ml-5 mt-2 rr-rst" id="hdnm"></h5>

                    <button type="button" class="close" data-dismiss="modal" onclick="XX()">&times;</button>

                </div>

                <div class="modal-body" id="sgIn">
                    <div class="rd-hdd">
                        <h4 class="rd-hd">SIGN IN</h4>
                    </div>
                    <div>
                        <div class="mt-4 ml-3">
                            <input type="text" class="form-control x-inp" placeholder="EMAIL*" id="siN">
                        </div>

                        <div class="mt-4 ml-3">
                            <input type="password" class="form-control x-inp" placeholder="PASSWORD *" id="siP">

                        </div>

                        <div style="display: flex; justify-content: center; align-items: center;">
                            <button class="btn co-pomb" onclick="signIn()"> S I G N &nbsp; I N</button>
                        </div>

                        <div style="display: flex; justify-content: center; align-items: center;">
                            <p class="x-md">
                                Don't have an account? <button class="btn lp-cemp" onclick="stsu()">Sign Up</button>
                            </p>
                        </div>


                    </div>





                </div>

                <div hidden class="modal-body sm-load" id="smload">
                    <p class="x-md">
                        You don't have an account, <br> please <button class="btn lp-cemp" onclick="stsu()">Sign Up</button> here
                    </p>
                </div>


                <div hidden class="modal-content rr-load" id="mloader">
                    <div class="chm-ripple">
                        <div></div>
                        <div></div>
                    </div>
                </div>

                <div hidden class="modal-body" id="sgUp">
                    <div class="rd-hdd">
                        <h4 class="rd-hd">SIGN UP</h4>
                    </div>
                    <div>
                        <div class="mt-4 ml-3">
                            <input type="text" class="form-control x-inp" placeholder="SURNAME*" id="sgupdts">
                        </div>

                        <div class="mt-4 ml-3">
                            <input type="text" class="form-control x-inp" placeholder="FIRST NAME*" id="sgupdts">
                        </div>

                        <div class="mt-4 ml-3">
                            <input type="number" class="form-control x-inp" placeholder="MOBILE NO*" id="sgupdts">
                        </div>

                        <div class="mt-4 ml-3">
                            <input type="text" class="form-control x-inp" placeholder="EMAIL*" id="sgupdts">
                        </div>

                        <div class="mt-4 ml-3">
                            <input type="password" class="form-control x-inp" placeholder="PASSWORD*" id="sgupdts">
                        </div>

                        <div class="mt-4 ml-3">
                            <input type="password" class="form-control x-inp" placeholder="RE-ENTER PASSWORD*"
                                id="sgupdts">
                        </div>

                        <div style="display: flex; justify-content: center; align-items: center;">
                            <button class="btn co-pomb" onclick="signUp()"> S I G N &nbsp; U P</button>
                        </div>

                        <div style="display: flex; justify-content: center; align-items: center;">
                            <p class="x-md">
                                Already have an account? <button class="btn lp-cemp" onclick="stsi()">Sign In</button>
                            </p>
                        </div>


                    </div>





                </div>


            </div>





        </div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>

<script src="../js/foodie.js"></script>


<script>

    let chosenLocation = document.getElementById('chLoc')
    let selectLocation = document.getElementById('selLoc')
    let locale = document.getElementById('local')
    let shipFee = document.getElementById('shpf')
    let shipTo = document.getElementById('shpto')
    let total = 0;

    if (localStorage.getItem('foodItems')) {
        foodItem = JSON.parse(localStorage.getItem('foodItems'));
        showData();
    }

    if (localStorage.getItem('shipLocation')) {
        address = JSON.parse(localStorage.getItem('shipLocation'));
        showLoc()
    }




    function showData(params) {
        display.innerHTML = "";
        display.innerHTML += `<th>Product</th><th>Price(&#8358;)</th><th>Quantity</th><th>Subtotal(&#8358;)</th><th>Action</th>`
        for (let i = 0; i < foodItem.length; i++) {
            let a = foodItem[i]
            let SubTotal1 = parseInt(a.itemPrice) * parseInt(a.Quantity)
            display.innerHTML += ` <td class="x-tdn" > <img  class="img-thumbnail" src="${a.Image}">
               ${a.itemName}</td>
            <td class="x-pp">${a.itemPrice}</td>
            <td class="x-pp" > ${a.Quantity}<br> </td>
        <td class="x-pp"> ${SubTotal1} </td>
        <td> <button class="btn btn-danger x-can" onclick='remove(${i})'=>X</button></td>`

        }
        addUp()

    }

    function remove(params) {
        let itr = foodItem.splice(params, 1);
        let qty = itr[0].Quantity;
        cartCounter = cartCounter - qty
        localStorage.setItem('cartCounter', cartCounter);
        localStorage.setItem('foodItems', JSON.stringify(foodItem))
        window.location.href = './cart.html';
        


    }

    function addUp(params) {


        for (let i = 0; i < foodItem.length; i++) {
            let a = foodItem[i]
            let SubTotal1 = parseInt(a.itemPrice) * parseInt(a.Quantity)
            total += parseInt(SubTotal1);
            subTotal2.innerHTML = total;
            subTotal3.innerHTML = total;

        } 
    }


    function showLoc(params) {
        for (let a = 0; a < address.length; a++) {
            shipFee.innerHTML = parseInt('500')
            subTotal3.innerHTML = total + parseInt(shipFee.innerHTML);
            locale.innerHTML = address[a].location
            console.log(shipFee.innerHTML);
            selectLocation.style.display = 'none '
            chosenLocation.style.display = 'block';
            shipTo.innerHTML = `Shipping to ${address[a].location}`

        }

    }


    function changeAdd(params) {
        selectLocation.style.display = 'block '
        chosenLocation.style.display = 'none';
        subTotal3.innerHTML = total;
    }

    function backtoS(params) {
        window.location.href = './menu.html'
    }

    


    function sI(params) {
        let loggedIn;
    if (localStorage.getItem('logIn')) {
        loggedIn = JSON.parse(localStorage.getItem('logIn'));
        
    }
    if (localStorage.getItem('sgnInfo')) {
        signupDetails = JSON.parse(localStorage.getItem('sgnInfo'));
    }

    if (localStorage.getItem('sIdts')) {
        e = JSON.parse(localStorage.getItem('sIdts'));
    }
   
    if (signupDetails.length > 0) {
        for (let f = 0; f < signupDetails.length; f++) {
            if (f == e) {
                console.log(signupDetails[f].fName);
               pName.innerHTML = signupDetails[f].fName
            }
            
        }
    }
    if (loggedIn == true) {
        sgn.hidden = true;
        prof.hidden = false;
        loggedIn = false
    }

    else if (loggedIn == false) {
        sgn.hidden = false;
        prof.hidden = true;
    }

}

sI()



</script>